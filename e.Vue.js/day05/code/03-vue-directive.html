<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <div id="app">
    <!-- <input type="text" v-focus> -->
    <!-- <div v-demo:a.b.c="d">hello</div> -->
    <div v-demo:style.50.red>hello</div>
    <div v-demo:style.20.green>world</div>
  </div>

  <script src="../../Vue.js"></script>
  <script>
    // 全局定义自定义指令
    // Vue.directive('focus', {
    //   inserted(el) {
    //     el.focus()
    //   }
    // })

    new Vue({
      el: '#app',
      data() {
        return {
          d: 'haha'
        }
      },

      // 局部定义自定义的指令
      // directives: {
      //   focus: {
      //     inserted(el) {
      //       el.focus()
      //     }
      //   }
      // }

      // directives: {
      //   demo: {
      //     bind(el, binding, vnode, oldVnode) {
      //       console.log('bind')
      //       // 只调用一次，指令第一次绑定到元素时调用。在这里可以进行一次性的初始化设置。
      //     },
      //     inserted(el, binding, vnode, oldVnode) {
      //       console.log('inserted')
      //       // 被绑定元素插入父节点时调用 (仅保证父节点存在，但不一定已被插入文档中)。
      //     },
      //     update(el, binding, vnode, oldVnode) {
      //       console.log('update')
      //       // 所在组件的 VNode 更新时调用，但是可能发生在其子 VNode 更新之前。指令的值可能发生了改变，也可能没有。但是你可以通过比较更新前后的值来忽略不必要的模板更新
      //     },
      //     componentUpdated(el, binding, vnode, oldVnode) {
      //       console.log('componentUpdated')
      //       // 指令所在组件的 VNode 及其子 VNode 全部更新后调用。
      //     },
      //     unbind(el, binding, vnode, oldVnode) {
      //       console.log('unbind')
      //       // 只调用一次，指令与元素解绑时调用。
      //     }
      //   } 
      // }

      directives: {
        // 简写，将对象写成函数的形式
        // 等同于bind和update的时候都做了一样的事情
        demo(el, binding) {
          console.log('el:', el)
          console.log('binding:', binding)
          // binding.name：指令名，不包括 v- 前缀。  demo
          // binding.value：指令的绑定值.   d -》 ‘haha’
          // expression：字符串形式的指令表达式。 d
          // arg：传给指令的参数，可选。 a
          // modifiers：一个包含修饰符的对象。修饰符对象为 { b: true, c: true }。

          const [fontSize, color] = Object.keys(binding.modifiers);

          el[binding.arg].fontSize = fontSize + 'px'
          el[binding.arg].color = color

        }
      }
    })
  </script>
</body>
</html>