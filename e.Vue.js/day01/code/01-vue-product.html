<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div id="app">
        <!-- åŒå¤§æ‹¬å·çš„æ’å€¼è¯­æ³•ï¼Œèƒ½å¤Ÿå°†å“åº”å¼çš„æ•°æ®ç›´æ¥æ¸²æŸ“åœ¨é¡µé¢ä¸Š -->
        <!-- {{ message }} -->
        <ul>
            <!-- v-foræŒ‡ä»¤ï¼Œç”¨äºå¾ªç¯ -->
            <!-- <li v-for="item in arr">{{ item }}</li> -->
            <li v-for="item in arr">
                <!-- v-modelç”¨äºåšæ•°æ®çš„åŒå‘ç»‘å®šçš„ -->
                <input type="number" v-model="item.age"> {{ item.name }}çš„æœˆè–ªæ˜¯{{ item.age }}k -
                <!-- v-ifæŒ‡ä»¤,ç”¨äºæ¡ä»¶åˆ¤æ–­ -->
                <span v-if="item.age < 20">ä½ æ²¡æœ‰åˆ°å¹³å‡å·¥èµ„</span>
            </li>
        </ul>
        <p>æˆ‘ä»¬ç­çš„æ€»å·¥èµ„æ˜¯{{ total }}</p>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <script>
        const vm = new Vue({
            // å‚æ•°ï¼Œoptions
            // elementçš„ç®€å†™,è¡¨ç¤ºè¦æŒ‚è½½åˆ°å“ªä¸ªèŠ‚ç‚¹
            el: '#app',
            // dataé‡Œé¢æ”¾å“åº”å¼çš„æ•°æ®
            data: {
                // message: 'hello Vue!'
                // arr: ['ğŸ', 'ğŸŒ', 'ğŸ“', 'ğŸ‡']
                arr: []
            },
            // æ˜¯ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œç›¸å½“äºwindow.onload
            // mounted() {
            //   setTimeout(() => {
            //     this.message = 'haha';
            //   }, 2000);
            // }
            mounted() {
                fetch('http://localhost:3000/api/students/get')
                    .then(response => response.json())
                    .then(res => {
                        this.arr = res.result;
                    });
            },
            // è®¡ç®—å±æ€§ï¼Œä¼šä¾èµ–å“åº”å¼çš„æ•°æ®
            computed: {
                // å†™æ³•ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¸€å®šè¦return
                total() {
                    return this.arr.reduce((sum, item) => {
                        return sum += +item.age
                    }, 0)
                }
            }
        })
    </script>
</body>

</html>